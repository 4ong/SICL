\section{Previous work}

\subsection{MIT LOOP with variations}
\label{sec-mit-loop}

One of the first implementations of the \commonlisp{} \texttt{loop}
macro is the one that is often referred to as ``MIT LOOP''
\cite{Burke:Moon:MIT.loop}.  A popular variation of this
implementation includes modifications by \symbolics{}.

This implementation of the \texttt{loop} macro is sometimes more
permissive than the \commonlisp{} standard.  For example, the standard
requires all \emph{variable clauses} to precede all \emph{main
  clauses}.  Code such as the one in this example:

\begin{verbatim}
    (loop until (> i 20)
          for i from 0
          do (print i))
\end{verbatim}

\noindent
is thus not conforming according to the standard, since \texttt{until}
is a \emph{main clause} whereas \texttt{for} is a \emph{variable
  clause}.

However, MIT LOOP and its variation accepts the code in the example.

\subsection{ECL and Clasp}

\ecl{} includes two implementations of the \texttt{loop} macro, namely
the initial MIT LOOP with only minor modifications, and the variation
by \symbolics{} also with minor modifications.

\subsection{SBCL}

\sbcl{} includes an implementation of the \texttt{loop} macro that was
originally derived from MIT LOOP, but that also includes code from the
\texttt{loop} macro of the \genera{} operating system.  Furthermore,
the \sbcl{} implementation of the \texttt{loop} macro has been
modified and improved to allow for user-definable extensions, such as
the extension defined in \cite{Rhodes:2007:USC:1622123.1622138} for
iterating over user-definable sequences.

\sbcl{} \texttt{loop} being derived from MIT LOOP, the unconforming
example shown in \refSec{sec-mit-loop} is also accepted by \sbcl{}.

\subsection{CLISP}

\clisp{} has its own implementation of the \texttt{loop} macro.  The
bulk of the implementation can be found in a function named
\texttt{expand-loop}.  This function consists of more than $900$ lines
of code.
